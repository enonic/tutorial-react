= PersonList Component
:sourcedir: ../
:imagesdir: media/

When the PersonList component is first rendered, it has no `data`, so it simply returns `null`.

It has a useEffect hook that will asyncronously run a fetch using the imported PERSON_LIST_QUERY.

Once the fetch returns, it will update the `data` state, so there is something to render.

Since the state has changed it will now be re-rendered based on the new state.

This time it will return an unordered list with one list-item per person in the data.

The list-item consists of a single Link component which contains an image and the displayName of the person.

Notice that the Link component is imported from `react-router-dom` and that it's `to` prop follows the pattern described in the routing chapter.

Styling is added by importing `personList.sass` file.

The final result in the browser is a page with a grid of 9 images (3 rows with 3 images on each row).

The displayName is initially hidden, but becomes visible when the link is hovered.

In addition, grayscale images become colorful when hovered.

== Query

First, let's define a query that we want to execute to fetch the data:

.src/queries/personList.gql
[source,graphql]
----
include::{sourcedir}src/main/resources/static/queries/personList.ts[]
----

To be able to import the `.gql` files we need to add an `index.d.ts` type declaration file for them in the same directory:

.src/queries/index.d.ts
[source,TypeScript]
----
include::{sourcedir}src/main/resources/static/queries/index.d.ts[]
----

== Component

To define a component create a `PersonList.tsx` file in the `components` directory:

.src/components/PersonList.tsx
[source,TypeScript]
----
include::{sourcedir}src/main/resources/static/components/PersonList.tsx[]
----

As you can see this component has 1 parameter `guillotineUrl` which is an url where we want to fetch data from.

All the common constants are extracted to a separate `constants.ts` file to be reused in other components:

.src/components/constants.ts
[source,TypeScript]
----
include::{sourcedir}src/main/resources/static/components/constants.ts[]
----

== Styles

To style the PersonList component we also need a complementary sass file:

.src/styles/personList.sass
[source,Sass]
----
include::{sourcedir}src/main/resources/static/styles/personList.sass[]
----

== Update App.tsx

Finally, we need to update the App.tsx file to include the `PersonList` component and display it on the root path `/`:

.src/App.tsx
[source,TypeScript]
----
import './App.sass';

import {Route, BrowserRouter as Router, Routes, } from 'react-router-dom';

import {PersonList} from './components/PersonList';

export default function App({guillotineUrl = '/site/intro/master'}: { guillotineUrl?: string }) {
  return (
    <Router>
      <Routes>
        <Route path="/" element={<PersonList guillotineUrl={guillotineUrl}/>}/>
        <Route
          element={<h1>Person url</h1>}
          path="/p/:name/:personId"
        />
        <Route path='*' element={<p>URL doesn't exist!</p>}/>
      </Routes>
    </Router>
  );
}
----

NOTE: We added optional `guillotineUrl` parameter that is passed to the `PersonList` component.
This lets us define the url where we want to fetch data from.
By default, it's set to `/site/intro/master` which will be appended to the `proxy` setting from the <<setup-react#, Setup React>> chapter.

== Result

Now, if you did everything correctly, you should see a grid of 9 images at http://localhost:3000.

When you hover over the image, the displayName will appear and the image will become colorful.

image::./person-list.png[width=1200]

== Next step

Let's create a single <<person#,Person component>> now.
