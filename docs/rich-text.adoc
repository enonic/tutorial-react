= The Rich text component
:sourcedir: ../
:imagesdir: media/

In this chapter we'll look at how you can take control over the Enonic's rich text component.

== Background

The RichText component is able to output HTML, and comes with basic handling of links and images.

URLs generated by default may not suit your use-case,
which is why you can implement your own `Image` and `Link` components, and inject them into the RichText component.

== Links

The `Link` component is used by `RichText` to correctly resolve and render links inside an HTML content.

The default implementation generates links based on the `href` included in the GraphQL query. To see this, visit the http://localhost:3000/p/lea-seydoux/a8b374a2-c532-45eb-9aa1-73d1c37cd681[Lea Seydoux^] page and click the http://localhost:8080/site/intro/master/persons/daniel-craig[Daniel Craig^] link inside her biography:

image::./craig-default-render.png[width=1132]

What we get here is a default preview generated by Enonic XP and not by our React app.

Our goal is to change internal person links to be in the format `/p/:name/:personId` - so they will be rendered by the React application instead.

=== Custom link component

Add the following code to your project:

.src/components/Link.tsx
[source,TypeScript]
----
include::{sourcedir}src/components/Link.tsx[]
----

What does it do?

- For the `person` content type, we construct URLs in this format `/p/:name/:personId`.
- For media content, we keep the `href` attribute, because we want media to be served directly from Enonic.
- For all other links, we remove the links and render text because our app can not handle it.

Finally, we must also ensure that we inject the new component into the `RichText` component:

.src/components/Person.tsx
[source,TypeScript]
----
import {Link} from './Link';

// ...

<RichText
  // ...
  Link={Link}
  // ...
/>
----

If you go to the http://localhost:3000/p/lea-seydoux/a8b374a2-c532-45eb-9aa1-73d1c37cd681[Lea Seydoux^] page and click the http://localhost:3000/p/daniel-craig/f29ba9b7-a73a-4767-82db-9da4df952924[Daniel Craig^] link again, you should see that the Daniel Craig's page is now rendered by our React app:

image::./craig-app-render.png[width=1242]

== Images

Similarly, you can implement your own `Image` component in order to take more control over how images are rendered:

.src/components/Image.tsx
[source,TypeScript]
----
include::{sourcedir}src/components/Image.tsx[]
----

The above simply keeps the standard values, but can be considered a starting point.

Remember to add your image component to the `RichText` component like this:

.src/components/Person.tsx
[source,TypeScript]
----
import {Image} from './Image';

// ...

<RichText
  ...
  Image={Image}
  ...
/>
----

== Next step

You are now familiar with the basic Rich text handling. In the next chapter, we dive into custom rich text components - aka <<macros#, Macros>>.
